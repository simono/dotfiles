# Configuration file for `prek`, a git hook framework written in Rust.
# See https://prek.j178.dev for more information.
#:schema https://www.schemastore.org/prek.json
#:tombi toml-version = "v1.1.0"
#
# Simon Olofsson <simon@olofsson.de>
#

default_install_hook_types = [
  "pre-commit",
  "pre-push",
  ]

[[repos]]
repo = "builtin"
hooks = [
  { id = "trailing-whitespace" },
  { id = "end-of-file-fixer" },
  { id = "check-yaml" },
  { id = "check-toml" },
  { id = "mixed-line-ending" },
  { id = "check-merge-conflict" },
  { id = "detect-private-key" },
  { id = "check-executables-have-shebangs" },
]

[[repos]]
repo = "local"
hooks = [
  {
    id = "fish-indent",
    name = "format fish scripts",
    entry = "fish_indent --write",
    language = "system",
    files = '\.fish$',
    stages = ["pre-commit"],
  },
  {
    id = "fish-indent-check",
    name = "check fish formatting",
    entry = "fish_indent --check",
    language = "system",
    files = '\.fish$',
    stages = ["pre-push"],
  },
  {
    id = "fish-syntax",
    name = "validate fish scripts",
    entry = "fish -n",
    language = "system",
    files = '\.fish$',
    stages = ["pre-push"],
  },
  {
    id = "dotbot-config",
    name = "validate dotbot configs",
    entry = "dotbot -n -c",
    language = "python",
    additional_dependencies = ["dotbot"],
    files = '^dotbot-.*\.yaml$',
    stages = ["pre-push"],
  },
]
